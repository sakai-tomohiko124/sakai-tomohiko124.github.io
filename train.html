<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>é–¢æ± é‰„é“é‹è¡Œæƒ…å ±</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* --- åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ«ã¨èƒŒæ™¯ --- */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Roboto Mono', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #2c5364 40%, #1a2980 70%, #00f2fe 100%);
            background-attachment: fixed;
            color: #f2f8ff;
            letter-spacing: 0.03em;
            position: relative;
            overflow-x: hidden;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1;
            background: radial-gradient(circle at 80% 10%, #00f2fe55 0%, transparent 60%),
                        radial-gradient(circle at 20% 90%, #ae00ff44 0%, transparent 60%),
                        linear-gradient(120deg, #0f2027cc 0%, #2c5364cc 100%);
            filter: blur(8px) brightness(1.1);
            animation: bgmove 18s linear infinite alternate;
        }
        @keyframes bgmove {
            0% { filter: blur(8px) brightness(1.1); }
            100% { filter: blur(16px) brightness(1.2); }
        }

		/* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ */
		#hamburger-menu-btn {
			display: none;
			position: fixed;
			top: 15px;
			left: 15px;
			z-index: 3000;
			background: linear-gradient(135deg, #00e0ff, #ae00ff);
			border: none;
			border-radius: 8px;
			padding: 12px 15px;
			font-size: 1.5em;
			color: #fff;
			cursor: pointer;
			box-shadow: 0 4px 10px rgba(0, 224, 255, 0.4);
			transition: transform 0.3s ease, box-shadow 0.3s ease;
		}
		#hamburger-menu-btn:hover {
			transform: scale(1.05);
			box-shadow: 0 6px 15px rgba(0, 224, 255, 0.6);
		}

		/* PCç”¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
		.responsive-nav {
			display: none;
			background: rgba(20,30,60,0.8);
			backdrop-filter: blur(2px);
			color: #fff;
			padding: 0.7em 0;
			text-align: center;
			font-size: 1.1em;
			letter-spacing: 1px;
			position: sticky;
			top: 0;
			z-index: 100;
		}
		.responsive-nav a {
			color: #00e0ff;
			margin: 0 1em;
			text-decoration: underline;
		}

		/* ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
		#table-of-contents {
			position: fixed;
			top: 0;
			left: 0;
			width: 280px;
			height: 100vh;
			background: rgba(20, 30, 60, 0.95);
			backdrop-filter: blur(10px);
			color: #f2f8ff;
			padding: 20px;
			box-shadow: 4px 0 20px rgba(0, 224, 255, 0.3);
			z-index: 2000;
			overflow-y: auto;
			transform: translateX(-100%);
			transition: transform 0.3s ease;
		}
		#table-of-contents.open {
			transform: translateX(0);
		}
		#table-of-contents h2 {
			color: #00e0ff;
			text-shadow: 0 0 8px rgba(0, 224, 255, 0.8);
			margin-top: 0;
		}
		#table-of-contents ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}
		#table-of-contents li {
			margin: 0.8em 0;
		}
		#table-of-contents a {
			color: #f2f8ff;
			text-decoration: none;
			font-size: 1.05em;
			transition: color 0.3s ease, text-shadow 0.3s ease;
		}
		#table-of-contents a:hover {
			color: #00e0ff;
			text-shadow: 0 0 8px rgba(0, 224, 255, 0.8);
		}

		/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
		@media (max-width: 768px) {
			#hamburger-menu-btn {
				display: block;
			}
			.responsive-nav {
				display: none !important;
			}
		}
		@media (min-width: 769px) {
			.responsive-nav {
				display: block;
			}
			#table-of-contents {
				display: none;
			}
		}

        /* --- ã‚³ãƒ³ãƒ†ãƒŠ --- */
        .container {
            max-width: 900px;
            margin: 40px auto;
            background: rgba(20,30,60,0.92);
            padding: 24px 36px;
            border-radius: 18px;
            box-shadow: 0 0 32px #00f2fe44, 0 2px 24px #ae00ff22;
            backdrop-filter: blur(2px);
        }
        .header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #00f2fe33;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        h1 { margin: 0; color: #f2f8ff; text-shadow: 0 0 8px #00f2fe99; }
        .meta-info { font-size: 0.9em; color: #a0b0c0; text-align: right; }
        
        /* --- é‹è¡Œæƒ…å ±ã‚¹ã‚¿ã‚¤ãƒ« --- */
        #result-container { margin-top: 20px; }
        .train-info {
            border: 1px solid #ae00ff55;
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 8px;
            background-color: rgba(174,0,255,0.1);
        }
        .line-name { font-weight: 600; font-size: 1.2em; color: #f2f8ff; margin-bottom: 5px; }
        .status { font-weight: bold; color: #ff8a80; }
        .toggle-details-btn {
            background: linear-gradient(90deg, #ae00ff 0%, #00f2fe 100%);
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 0.85em;
            cursor: pointer;
            margin-top: 10px;
            color: #fff;
            font-weight: bold;
            transition: background 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 8px #ae00ff44;
        }
        .toggle-details-btn:hover {
            background: linear-gradient(90deg, #00f2fe 0%, #ae00ff 100%);
            box-shadow: 0 0 16px #00f2fe66;
        }
        .details {
            margin-top: 12px;
            padding: 10px;
            background-color: rgba(0,0,0,0.2);
            border-radius: 4px;
            color: #f2f8ff;
            border-left: 3px solid #ae00ff;
        }
        
        /* --- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹ --- */
        .message-box { text-align: center; color: #a0b0c0; padding: 30px; border: 1px dashed #00f2fe55; border-radius: 8px; background-color: transparent; }
        .message-box.success { color: #a7ffeb; border-color: #a7ffeb; }
        .message-box.error { color: #ff8a80; border-color: #ff8a80; }

        @media (max-width: 600px) {
            .container { padding: 6vw 2vw; border-radius: 0; margin: 0; }
            .nav a { margin: 0 0.5em; font-size: 0.9em; }
            h1 { font-size: 1.2em; }
        }
        
        #hamburger-menu-btn {
            display: block !important;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 9999;
            background: transparent;
            border: none;
            width: 40px;
            height: 40px;
            cursor: pointer;
            padding: 0;
            transition: all 0.3s ease;
        }
        
        /* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã®3æœ¬ç·š */
        #hamburger-menu-btn::before,
        #hamburger-menu-btn::after,
        .hamburger-line {
            content: '';
            display: block;
            width: 32px;
            height: 4px;
            background: #00e0ff;
            border-radius: 2px;
            margin: 0 auto 6px;
            box-shadow: 0 0 10px rgba(0, 224, 255, 0.8), 0 0 20px rgba(0, 224, 255, 0.5);
            transition: all 0.3s ease;
        }
        
        #hamburger-menu-btn::before {
            margin-top: 8px;
        }
        
        #hamburger-menu-btn::after {
            margin-bottom: 0;
        }
        
        #hamburger-menu-btn:hover::before,
        #hamburger-menu-btn:hover::after,
        #hamburger-menu-btn:hover .hamburger-line {
            background: #ff00ff;
            box-shadow: 0 0 15px rgba(255, 0, 255, 1), 0 0 30px rgba(255, 0, 255, 0.7);
            transform: scaleX(1.1);
        }
    </style>
</head>
<body>
	<button id="hamburger-menu-btn">
		<span class="hamburger-line"></span>
	</button>
	<nav class="responsive-nav">
		<a href="home.html">ãƒ›ãƒ¼ãƒ </a>
		<a href="index2.html">ã‚¯ã‚¤ã‚º</a>
		<a href="index5.html">ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a>
		<a href="ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ.html" style="font-weight: bold;" target="_blank">ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆç”»é¢ã¸</a>
	</nav>
	    <aside id="table-of-contents">
        <h2>å…¨ãƒªãƒ³ã‚¯é›†</h2>
        <ul>
            <li><a href="home.html">ğŸ  ãƒ›ãƒ¼ãƒ </a></li>
            <li><a href="index2.html">ğŸ§  ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¯ã‚¤ã‚º</a></li>
            <li><a href="index5.html">ğŸ“– ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a></li>
            <li><a href="ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ.html">ğŸ“Š ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆç”»é¢ã¸</a></li>
            <li><a href="logout.html">ğŸ”’ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a></li>
            <li><a href="link.html">ğŸ“‘ å…¨ãƒªãƒ³ã‚¯é›†</a></li>
            <li><a href="hate.html">ğŸ¯ è‹¦æ‰‹å…‹æœ</a></li>
            <li><a href="hate/base.html">ğŸ“š ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªç”¨èªé›†</a></li>
            <li><a href="https://docs.python.org/ja/3/" target="_blank">ğŸ Pythonå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
            <li><a href="https://www.w3schools.com/sql/" target="_blank">ğŸ—„ï¸ SQLãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a></li>
            <li><a href="pythonexam.html">ğŸ“ Pythonè©¦é¨“æƒ…å ±</a></li>
            <li><a href="æ„Ÿæƒ³.html">âœï¸ Pythonèªå®šåŸºç¤è©¦é¨“ã®æ„Ÿæƒ³</a></li>
            <li><a href="https://www.rakuten.co.jp/kbsanhe/" target="_blank">ğŸ›’ æ¥½å¤©ã‚µã‚¤ãƒˆ</a></li>
            <li><a href="weather.html">ğŸŒ¤ï¸ å¤©æ°—æƒ…å ±</a></li>
            <li><a href="train.html">ğŸšƒ é›»è»Šæƒ…å ±</a></li>
            <li><a href="other.html">ğŸ”— ãã®ä»–</a></li>
            <li><a href="index3.html">ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ</a></li>
            <li><a href="index4.html">ğŸ”— ä¾¿åˆ©ãƒªãƒ³ã‚¯</a></li>
            <li><a href="story.html">ğŸ“– ç‰©èª</a></li>
        </ul>
    </aside>

    <div class="container">
        <div class="header">
            <h1>é–¢æ± é‰„é“é‹è¡Œæƒ…å ±</h1>
            <div class="meta-info">
                <div id="last-updated">ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸­...</div>
                <div id="countdown"></div>
            </div>
        </div>
        <div id="result-container">
            <div class="message-box">
                <p>æƒ…å ±ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</p>
            </div>
        </div>
    </div>

    <script>
        const UPDATE_INTERVAL_MS = 60 * 1000;
        let countdownSeconds = UPDATE_INTERVAL_MS / 1000;

        const resultContainer = document.getElementById('result-container');
        const lastUpdatedElem = document.getElementById('last-updated');
        const countdownElem = document.getElementById('countdown');
        
        async function fetchAndUpdate() {
            try {
                const response = await fetch('train_info.json?t=' + new Date().getTime());

                if (!response.ok) {
                    if (response.status === 404) {
                        resultContainer.innerHTML = `<div class="message-box error"><p><strong>ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚</strong></p><p>ç¾åœ¨ã€é‹è¡Œæƒ…å ±ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ä¸­ã§ã™ã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚</p><p><small>(GitHub Actionsã®åˆå›å®Ÿè¡Œã«ã¯æ•°åˆ†ã‹ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™)</small></p></div>`;
                        lastUpdatedElem.textContent = 'ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå¾…ã¡';
                    } else {
                        throw new Error(`ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ (HTTP ${response.status})`);
                    }
                    return; 
                }
                
                // â˜…â˜…â˜… ä¿®æ­£ç‚¹ â˜…â˜…â˜…
                // JSONãƒ‡ãƒ¼ã‚¿ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦èª­ã¿è¾¼ã¿ã€ä¸­ã®ã‚­ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
                const data = await response.json();
                
                if (data.lastUpdated) {
                    lastUpdatedElem.textContent = `ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆæ™‚åˆ»: ${new Date(data.lastUpdated).toLocaleString('ja-JP')}`;
                }

                resultContainer.innerHTML = '';
                
                const lines = data.lines || []; // `data.lines` ã‚’è¦‹ã‚‹ã‚ˆã†ã«ä¿®æ­£

                if (lines.length > 0) {
                    const troubledLines = lines.filter(item => item.status !== 'å¹³å¸¸é‹è»¢' && !item.status.includes('ã»ã¼å¹³å¸¸'));

                    if (troubledLines.length > 0) {
                        troubledLines.forEach(item => {
                            const infoDiv = document.createElement('div');
                            infoDiv.className = 'train-info';
                            
                            infoDiv.innerHTML = `
                                <div class="line-name">${item.name || 'æƒ…å ±ãªã—'}</div>
                                <div class="status">çŠ¶æ³: ${item.status || 'æƒ…å ±ãªã—'}</div>
                                <button class="toggle-details-btn">è©³ç´°è¡¨ç¤º</button>
                                <div class="details" style="display: none;">${item.detail || 'æƒ…å ±ãªã—'}</div>
                            `;

                            resultContainer.appendChild(infoDiv);
                        });
                    } else {
                        resultContainer.innerHTML = `
                            <div class="message-box success">
                                <p><strong>ã™ã¹ã¦æ­£å¸¸é‹è»¢ã§ã™</strong></p>
                            </div>
                        `;
                    }
                } else {
                    resultContainer.innerHTML = `<div class="message-box"><p>è·¯ç·šã®æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p></div>`;
                }

            } catch (error) {
                resultContainer.innerHTML = `<div class="message-box error"><p><strong>æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</strong></p><p>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã™ã‚‹ã‹ã€ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚</p><p><small>ã‚¨ãƒ©ãƒ¼: ${error.message}</small></p></div>`;
            } finally {
                countdownSeconds = UPDATE_INTERVAL_MS / 1000;
            }
        }

        function updateTimer() {
            countdownElem.textContent = `æ¬¡ã®è¡¨ç¤ºæ›´æ–°ã¾ã§ ${countdownSeconds} ç§’`;
            countdownSeconds--;
        }

        resultContainer.addEventListener('click', function(event) {
            if (event.target.classList.contains('toggle-details-btn')) {
                const btn = event.target;
                const detailsDiv = btn.nextElementSibling;

                if (detailsDiv && detailsDiv.classList.contains('details')) {
                    const isHidden = detailsDiv.style.display === 'none';
                    detailsDiv.style.display = isHidden ? 'block' : 'none';
                    btn.textContent = isHidden ? 'è©³ç´°ã‚’éš ã™' : 'è©³ç´°è¡¨ç¤º';
                }
            }
        });

        fetchAndUpdate(); 
        setInterval(fetchAndUpdate, UPDATE_INTERVAL_MS);
        
        updateTimer();
        setInterval(updateTimer, 1000);
    </script>
	<script>
		// ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ©Ÿèƒ½
		document.addEventListener('DOMContentLoaded', () => {
			const hamburgerButton = document.getElementById('hamburger-menu-btn');
			const toc = document.getElementById('table-of-contents');

			if (hamburgerButton && toc) {
				hamburgerButton.addEventListener('click', e => {
					e.stopPropagation();
					toc.classList.toggle('open');
				});
				document.body.addEventListener('click', e => {
					if (toc.classList.contains('open') && !toc.contains(e.target) && e.target !== hamburgerButton) {
						toc.classList.remove('open');
					}
				});
			}
		});
	</script>
    <script src="static/security.js"></script>
</body>
</html>
